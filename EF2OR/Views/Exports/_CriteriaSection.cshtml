@model EF2OR.ViewModels.ApiCriteriaSection

@{
    var numCheckboxes = Model.FilterCheckboxes == null ? 0 : Model.FilterCheckboxes.Count();
    var numSelected = Model.FilterCheckboxes == null ? 0 : Model.FilterCheckboxes.Where(x => x.Selected).Count();
    var numSelectedText = numSelected.ToString() + " of " + numCheckboxes.ToString() + " selected";
    var itemWord = numCheckboxes == 1 ? "item" : "items";
    numSelectedText = numSelected == 0 ? numCheckboxes.ToString() + " " + itemWord + " - No Filters Applied" : numSelectedText;
    var collapseClass = Model.IsExpanded ? "collapse in" : "collapse";
    var sectionName = Model.SectionName.Replace(" ", "_");
}

@Html.HiddenFor(x => x.SectionName)

<div class="btn btn-primary accordionHeader" data-toggle="collapse" href="#@sectionName">
    @Model.SectionName <span id="numSelected_@sectionName">(@numSelectedText)</span>
</div>
<div class="@collapseClass" id="@sectionName" style="overflow-y:hidden;">
    <a href="javascript:selectAll('@sectionName');">(select all)</a>
    <a href="javascript:deselectAll('@sectionName');">(deselect all)</a><br />
    @Html.EditorFor(x => x.FilterCheckboxes)
</div>
